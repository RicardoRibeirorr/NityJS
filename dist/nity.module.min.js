var M=class{constructor(){this.sheets=new Map}add(t){this.sheets.set(t.name,t)}async preload(){for(let t of this.sheets.values())await t.load()}getSheet(t){return this.sheets.get(t)}};var a=class{constructor(){this.gameObject=null,this.enabled=!0,this._started=!1}__lateStart(){}__update(){}__draw(t){this.enabled&&typeof this.draw=="function"&&this.draw(t)}__preload(){}start(){}update(){}draw(t){}async preload(){}destroy(){}lateUpdate(){}};var S=class extends a{constructor(t,e=1){super(),this.canvas=t,this.zoom=e}applyTransform(t){let e=this.gameObject.getGlobalX(),o=this.gameObject.getGlobalY();t.setTransform(this.zoom,0,0,this.zoom,-e*this.zoom+this.canvas.width/2,-o*this.zoom+this.canvas.height/2)}};var d=class s{static keys=new Set;static pressedKeys=new Set;static releasedKeys=new Set;static previousKeys=new Set;static mouseButtons=new Set;static pressedMouseButtons=new Set;static releasedMouseButtons=new Set;static previousMouseButtons=new Set;static mousePosition={x:0,y:0};static lastMousePosition={x:0,y:0};static onKeyDown=new Map;static onKeyStay=new Map;static onKeyUp=new Map;static onMouseDown=new Map;static onMouseStay=new Map;static onMouseUp=new Map;static onMouseMove=new Set;static canvas=null;static initialize(t=null){s.canvas=t,window.addEventListener("keydown",o=>{let i=o.key.toLowerCase();if(!s.keys.has(i)){s.pressedKeys.add(i);let n=s.onKeyDown.get(i);n&&n(i)}s.keys.add(i)}),window.addEventListener("keyup",o=>{let i=o.key.toLowerCase();s.keys.delete(i),s.releasedKeys.add(i);let n=s.onKeyUp.get(i);n&&n(i)});let e=t||window;e.addEventListener("mousedown",o=>{let i=o.button;if(!s.mouseButtons.has(i)){s.pressedMouseButtons.add(i);let n=s.onMouseDown.get(i);n&&n(i,s.mousePosition)}s.mouseButtons.add(i),s.updateMousePosition(o)}),e.addEventListener("mouseup",o=>{let i=o.button;s.mouseButtons.delete(i),s.releasedMouseButtons.add(i);let n=s.onMouseUp.get(i);n&&n(i,s.mousePosition),s.updateMousePosition(o)}),e.addEventListener("mousemove",o=>{s.updateMousePosition(o);for(let i of s.onMouseMove)i(s.mousePosition,s.lastMousePosition)}),t&&t.addEventListener("contextmenu",o=>o.preventDefault())}static updateMousePosition(t){if(s.lastMousePosition={...s.mousePosition},s.canvas){let e=s.canvas.getBoundingClientRect();s.mousePosition.x=t.clientX-e.left,s.mousePosition.y=t.clientY-e.top}else s.mousePosition.x=t.clientX,s.mousePosition.y=t.clientY}static update(){for(let t of s.keys)if(s.previousKeys.has(t)){let e=s.onKeyStay.get(t);e&&e(t)}for(let t of s.mouseButtons)if(s.previousMouseButtons.has(t)){let e=s.onMouseStay.get(t);e&&e(t,s.mousePosition)}s.pressedKeys.clear(),s.releasedKeys.clear(),s.pressedMouseButtons.clear(),s.releasedMouseButtons.clear(),s.previousKeys=new Set(s.keys),s.previousMouseButtons=new Set(s.mouseButtons)}static isKeyDown(t){return s.keys.has(t.toLowerCase())}static isKeyPressed(t){return s.pressedKeys.has(t.toLowerCase())}static isKeyReleased(t){return s.releasedKeys.has(t.toLowerCase())}static isMouseDown(t=0){return s.mouseButtons.has(t)}static isMousePressed(t=0){return s.pressedMouseButtons.has(t)}static isMouseReleased(t=0){return s.releasedMouseButtons.has(t)}static getMousePosition(){return{...s.mousePosition}}static getMouseDelta(){return{x:s.mousePosition.x-s.lastMousePosition.x,y:s.mousePosition.y-s.lastMousePosition.y}}static isLeftMouseDown(){return s.isMouseDown(0)}static isLeftMousePressed(){return s.isMousePressed(0)}static isRightMouseDown(){return s.isMouseDown(2)}static isRightMousePressed(){return s.isMousePressed(2)}static onKeyDownEvent(t,e){s.onKeyDown.set(t.toLowerCase(),e)}static onKeyStayEvent(t,e){s.onKeyStay.set(t.toLowerCase(),e)}static onKeyUpEvent(t,e){s.onKeyUp.set(t.toLowerCase(),e)}static onMouseDownEvent(t=0,e){s.onMouseDown.set(t,e)}static onMouseStayEvent(t=0,e){s.onMouseStay.set(t,e)}static onMouseUpEvent(t=0,e){s.onMouseUp.set(t,e)}static onMouseMoveEvent(t){s.onMouseMove.add(t)}static onLeftClickEvent(t){s.onMouseDownEvent(0,t)}static onRightClickEvent(t){s.onMouseDownEvent(2,t)}static removeKeyEvent(t,e){let o=e.toLowerCase();switch(t){case"down":s.onKeyDown.delete(o);break;case"stay":s.onKeyStay.delete(o);break;case"up":s.onKeyUp.delete(o);break}}static removeMouseEvent(t,e){switch(t){case"down":s.onMouseDown.delete(e);break;case"stay":s.onMouseStay.delete(e);break;case"up":s.onMouseUp.delete(e);break;case"move":s.onMouseMove.delete(e);break}}static clearAllEvents(){s.onKeyDown.clear(),s.onKeyStay.clear(),s.onKeyUp.clear(),s.onMouseDown.clear(),s.onMouseStay.clear(),s.onMouseUp.clear(),s.onMouseMove.clear()}};var p=class extends a{constructor(){super(),this.trigger=!1,this._lastCollisions=new Set}isTrigger(){return this.trigger===!0}start(){l.instance.register(this)}destroy(){l.instance.unregister(this)}checkCollisionWith(t){throw new Error("checkCollisionWith must be implemented")}getBounds(){throw new Error("getBounds must be implemented")}};var l=class s{constructor(){this.colliders=new Set,s.instance=this}register(t){this.colliders.add(t)}unregister(t){this.colliders.delete(t)}update(){}intersects(t,e){return t instanceof p&&e instanceof p?t.checkCollisionWith(e):(console.warn("INTERNAL_ERROR:At least one object is not an collider component:",t,e),!1)}};l.instance=void 0;var f=class s{constructor(t=0,e=0){this.x=t,this.y=e,this.components=[],this.children=[],this.parent=null,this.name="",this.tags=new Set,this.paused=!1}addComponent(t){if(!(t instanceof a))throw new Error('addComponent: property "component" must be an instance of Component');if(this.getComponent(t.constructor))throw new Error(`Component of type ${t.constructor.name} already exists on this GameObject.`);return t.gameObject=this,this.components.push(t),t}getComponent(t){if(typeof t!="function"||!t.prototype)throw new Error('getComponent: property "type" must be a class');return this.components.find(e=>e instanceof t)}hasComponent(t){if(typeof t!="function"||!t.prototype)throw new Error('hasComponent: property "type" must be a class');return!!this.getComponent(t)}removeComponent(t){let e=this.components.findIndex(o=>o instanceof t);e!==-1&&(this.components[e].destroy?.(),this.components.splice(e,1))}getComponentInChildren(t){if(typeof t!="function"||!t.prototype)throw new Error('hasComponent: property "type" must be a class');return this.children.find(e=>e.hasComponent(t)).getComponent(t)}hasTag(t){return this.tags.has(t)}addTag(t){this.tags.add(t)}__addChild(t){if(!(t instanceof s))throw new Error(`Nity2D: method 'addChild' only accepts GameObject, '${typeof t}' provided`);this.children.push(t),t.parent=this}addChild(t){C.create(t,{x:this.x,y:this.y,parent:this,addToScene:!0})}addChildren(t){if(!Array.isArray(t))throw new Error(`Nity2D: method 'addChildren' only accepts array '${typeof t}' provided`);t.forEach(e=>this.addChild(e))}removeChild(t){let e=this.children.indexOf(t);e!==-1&&(t.parent=null,this.children.splice(e,1))}getGlobalX(){return this.parent?this.x+this.parent.getGlobalX():this.x}getGlobalY(){return this.parent?this.y+this.parent.getGlobalY():this.y}async preload(){let t=this.components.map(e=>e.preload?.());for(let e of this.children)t.push(e.preload?.());await Promise.all(t)}start(){for(let t of this.components)t.enabled&&typeof t.start=="function"&&t.start();for(let t of this.children)t.start()}update(){if(!this.paused){for(let t of this.components)t.enabled&&typeof t.update=="function"&&t.update();for(let t of this.children)t.update()}}lateUpdate(){if(!this.paused){for(let t of this.components)t.enabled&&typeof t.lateUpdate=="function"&&t.lateUpdate();for(let t of this.children)t.lateUpdate()}}onCollisionEnter(t){for(let e of this.components)typeof e.onCollisionEnter=="function"&&e.onCollisionEnter(t)}onCollisionStay(t){for(let e of this.components)typeof e.onCollisionStay=="function"&&e.onCollisionStay(t)}onCollisionExit(t){for(let e of this.components)typeof e.onCollisionExit=="function"&&e.onCollisionExit(t)}__draw(t){if(!this.paused){for(let e of this.components)e.__draw(t);for(let e of this.children)e.__draw(t)}}};var C=class s{static create(t,e={},...o){let{x:i=0,y:n=0,parent:r=null,addToScene:u=!0}=e,c;if(typeof t=="function")c=new t(i,n,...o);else if(t instanceof f)c=t,c.x=i,c.y=n;else throw new Error("Instantiate.create: prefab must be a GameObject instance or constructor function");if(r){if(!(r instanceof f))throw new Error("Instantiate.create: parent must be a GameObject instance");r.__addChild(c)}return u&&!r&&h.instance?.scene&&h.instance.scene.add(c),s._registerGameObject(c),c}static _registerGameObject(t){for(let e of t.components)s._registerComponent(e);for(let e of t.children)s._registerGameObject(e)}static _registerComponent(t){console.log("Instantiate: Registering component:",t.constructor.name),t instanceof p&&(console.log("Instantiate: Found collider component, registering..."),l.instance?(l.instance.register(t),console.log("Collider registered with CollisionSystem:",t,"Total colliders:",l.instance.colliders.size)):(console.warn("CollisionSystem not initialized. Collider will be registered when system is available:",t),s._pendingColliders||(s._pendingColliders=[]),s._pendingColliders.push(t))),typeof t.start=="function"&&(console.log("Instantiate: Calling start() on component:",t.constructor.name),t.start())}static registerPendingColliders(){if(s._pendingColliders&&l.instance){console.log("Registering pending colliders:",s._pendingColliders.length);for(let t of s._pendingColliders)l.instance.register(t);s._pendingColliders=[]}}static destroy(t){if(!(t instanceof f))throw new Error("Instantiate.destroy: gameObject must be a GameObject instance");for(let e of[...t.children])s.destroy(e);for(let e of t.components)s._unregisterComponent(e);if(t.parent&&t.parent.removeChild(t),h.instance?.scene){let e=h.instance.scene.objects.indexOf(t);e!==-1&&h.instance.scene.objects.splice(e,1)}}static _unregisterComponent(t){t instanceof p&&l.instance&&l.instance.unregister(t),typeof t.destroy=="function"&&t.destroy()}static clone(t,e={}){if(!(t instanceof f))throw new Error("Instantiate.clone: original must be a GameObject instance");let o=new f(t.x,t.y);o.name=t.name,o.tags=new Set(t.tags);for(let c of t.components){let w=c.constructor,x=new w;for(let b in c)c.hasOwnProperty(b)&&b!=="gameObject"&&(x[b]=c[b]);o.addComponent(x)}for(let c of t.children){let w=s.clone(c,{addToScene:!1});o.__addChild(w)}let{x:i=o.x,y:n=o.y,parent:r=null,addToScene:u=!0}=e;return o.x=i,o.y=n,r&&r.__addChild(o),u&&!r&&h.instance?.scene&&h.instance.scene.add(o),s._registerGameObject(o),o}};var h=class s{#t=!1;constructor(t){s.instance=this,this.canvas=t,this.ctx=t.getContext("2d"),this.scene=null,this._lastTime=0,this.mainCamera=null,this.spriteRegistry=new M,this.paused=!1,this.#t=!1,this._deltaTime=0,new l,C.registerPendingColliders()}launch(t){if(!t)throw new Error("No scene assigned to game.");this.#o(),this.#e(t)}async#e(t){await this.loadScene(t),this.start()}async loadScene(t){if(!t)throw new Error("No scene provided.");this.scene=t,typeof t._create=="function"&&(t._create(t),t._create=null),await this.spriteRegistry.preload(),await this.scene.preload(),await this.scene.start(),this.start()}start(){d.initialize(this.canvas),this.#s(),requestAnimationFrame(this.loop.bind(this))}loop(t){if(this._deltaTime=(t-this._lastTime)/1e3,this._deltaTime>.1&&(this._deltaTime=.1),this._lastTime=t,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!this.#t){if(!this.paused&&(d.update(),this.scene.__update(),this.mainCamera)){let e=this.mainCamera.getComponent(S);e&&e.applyTransform(this.ctx)}this.scene.__lateUpdate(),this.scene.__draw(this.ctx)}requestAnimationFrame(this.loop.bind(this))}pause(){this.paused=!0}resume(){this.paused=!1}#n(){this.#t!==!0&&(this.#t=!0,console.log("Game fullscale pause"))}#r(){this.#t!==!1&&(this.#t=!1,this._lastTime=performance.now(),console.log("Game fullscale resume"))}#s(){document.addEventListener("visibilitychange",()=>{document.hidden?this.#n():this.#r()})}#o(){if(!this.canvas){console.warn("No canvas element provided.");return}this.ctx||console.error("Failed to get 2D context from canvas."),this.ctx.imageSmoothingEnabled=!1,this.ctx.mozImageSmoothingEnabled=!1,this.ctx.webkitImageSmoothingEnabled=!1}};h.instance=null;var m=class{static deltaTime(){return h.instance._deltaTime}};var P=class{constructor(t,e=[],o=10,i=!0){this.name=t,this.spriteNames=e,this.fps=o,this.loop=i}};var y=class extends a{constructor(t,e){super(),this.sheetName=t,this.spriteName=e,this.sprite=null}preload(){let t=h.instance.spriteRegistry.getSheet(this.sheetName);if(!t)throw new Error(`Spritesheet '${this.sheetName}' not found.`);if(this.sprite=t.getSprite(this.spriteName),!this.sprite)throw new Error(`Sprite '${this.spriteName}' not found in sheet '${this.sheetName}'.`)}__draw(t){if(!this.sprite)return;let e=this.gameObject.getGlobalX(),o=this.gameObject.getGlobalY();t.drawImage(this.sprite.image,this.sprite.x,this.sprite.y,this.sprite.width,this.sprite.height,e,o,this.sprite.width,this.sprite.height)}};var K=class extends a{constructor(t,e=null){super(),this.sheetName=t,this.clips=new Map,this.currentClip=null,this.currentFrame=0,this.autoPlay=!0,this.time=0,this.defaultClipName=e}start(){this.autoPlay&&this.defaultClipName&&this.play(this.defaultClipName)}addClip(t){this.clips.set(t.name,t)}play(t){let e=this.clips.get(t);if(!e)throw new Error(`Animation clip '${t}' not found.`);this.currentClip=e,this.currentFrame=0,this.time=0,this._applyFrame()}update(){if(!this.currentClip)return;this.time+=m.deltaTime();let t=1/this.currentClip.fps;if(this.time>=t){if(this.time-=t,this.currentFrame++,this.currentFrame>=this.currentClip.spriteNames.length)if(this.currentClip.loop)this.currentFrame=0;else{this.currentFrame=this.currentClip.spriteNames.length-1;return}this._applyFrame()}}_applyFrame(){let t=this.currentClip.spriteNames[this.currentFrame],e=this.gameObject.getComponent(y);e&&(e.sprite=h.instance.spriteRegistry.getSheet(this.sheetName).getSprite(t))}};var O=class{constructor({create:t}={}){this.objects=[],this._create=t}add(t){if(!(t instanceof f))throw new Error(`[Nity] Forbidden object '${t?t.constructor.name:null}' added to the scene. Accepts only 'GameObject'.`);this.objects.push(t)}findByName(t){return this.objects.find(e=>e.name===t)}findByTag(t){return this.objects.filter(e=>e.hasTag(t))}async preload(){typeof this._create=="function"?(this._create(this),this._create=null):console.log("Empty scene loaded");let t=this.objects.map(e=>e?.preload?.());await Promise.all(t)}async start(){for(let t of this.objects)typeof t?.start=="function"&&t?.start();setTimeout(()=>{},500)}update(){}lateUpdate(){}__update(){for(let t of this.objects)typeof t?.update=="function"&&t?.update();l.instance?l.instance?.update():console.warn("Scene: CollisionSystem.instance is null!"),this?.update()}__lateUpdate(){for(let t of this.objects)typeof t.lateUpdate=="function"&&t?.lateUpdate();this?.lateUpdate()}__draw(t){for(let e of this.objects)e.__draw(t)}};var E=class extends a{constructor(t={gravityScale:300}){super(),this.gravity=!0,this.gravityScale=t.gravityScale||300,this.velocity={x:0,y:0}}update(){this.gravity&&(this.velocity.y+=this.gravityScale*m.deltaTime())}_doMove(t,e){this.gameObject.x+=t,this.gameObject.y+=e}};var k=class s extends E{#t;#e=new Set;bounciness=0;gravity=!1;gravityScale=300;constructor(t={gravity:!1,gravityScale:300,bounciness:0}){super(t),this.gravity=t.gravity!=null?t.gravity:!1,this.bounciness=t.bounciness||0}start(){this.#t=this.gameObject.getComponent(p),this.#t||console.warn("RigidbodyComponent requires a collider.")}update(){super.update(),this.move(this.velocity.x*m.deltaTime(),this.velocity.y*m.deltaTime())}move(t,e){if(!this.#t)return!0;let o=Math.max(Math.abs(t),Math.abs(e)),i=Math.max(1,Math.ceil(o/.25)),n=t/i,r=e/i,u=new Set,c=!1,w={x:0,y:0};for(let x=0;x<i;x++){let b=this.gameObject.x,I=this.gameObject.y;this._doMove(n,r),w.x+=n,w.y+=r;for(let v of l.instance.colliders){if(v===this.#t||!this.#t.checkCollisionWith(v))continue;let g=v.gameObject;u.add(g);let X=this.#e.has(g),Y=this.#t.isTrigger()||v.isTrigger();if(X?(this.#o(this.gameObject,g),g.hasComponent?.(s)||this.#o(g,this.gameObject)):(this.#s(this.gameObject,g),g.hasComponent?.(s)||this.#s(g,this.gameObject)),!Y&&!c){this.gameObject.x=b,this.gameObject.y=I,Math.abs(r)>Math.abs(n)?this.velocity.y*=-this.bounciness:this.velocity.x*=-this.bounciness,c=!0;break}}if(c)break}return this.#n(u),this.#e=u,!0}#n(t){for(let e of this.#e)if(!t.has(e)){let o=e.getComponent(p);o?this.#r(o,2.5)?t.add(e):(this.#i(this.gameObject,e),e?.hasComponent?.(s)||this.#i(e,this.gameObject)):(this.#i(this.gameObject,e),e?.hasComponent?.(s)||this.#i(e,this.gameObject))}}#r(t,e=2){let o=this.#t.getBounds(),i=t.getBounds();return o.x<i.x+i.width+e&&o.x+o.width+e>i.x&&o.y<i.y+i.height+e&&o.y+o.height+e>i.y}#s(t,e){t?.getComponent?.(p)?.isTrigger()?t?.onTriggerEnter?.(e):t?.onCollisionEnter?.(e)}#o(t,e){t?.getComponent?.(p)?.isTrigger()?t?.onTriggerStay?.(e):t?.onCollisionStay?.(e)}#i(t,e){t?.getComponent?.(p)?.isTrigger()?t?.onTriggerExit?.(e):t?.onCollisionExit?.(e)}_doMove(t,e){this.gameObject.x+=t,this.gameObject.y+=e}};var B=class extends a{rigidbody;constructor(t=100){super(),this.speed=t}start(){this.rigidbody=this.gameObject.getComponent(k),this.rigidbody||console.warn("MovementComponent requires RigidbodyComponent to function properly.")}update(){let t=0,e=0;(d.isKeyDown("ArrowRight")||d.isKeyDown("d")||d.isKeyDown("D"))&&(t+=this.speed*m.deltaTime()),(d.isKeyDown("ArrowLeft")||d.isKeyDown("a")||d.isKeyDown("A"))&&(t-=this.speed*m.deltaTime()),(d.isKeyDown("ArrowDown")||d.isKeyDown("s")||d.isKeyDown("S"))&&(e+=this.speed*m.deltaTime()),(d.isKeyDown("ArrowUp")||d.isKeyDown("w")||d.isKeyDown("W"))&&(e-=this.speed*m.deltaTime()),(t!==0||e!==0)&&this.rigidbody.move(t,e)}};var j=class{constructor(t,e,o,i,n){this.image=t,this.x=e,this.y=o,this.width=i,this.height=n}};var D=class{constructor(t,e,o=null,i=null,n=1,r=1){this.name=t,this.src=e,this.image=null,this.frameWidth=o,this.frameHeight=i,this.cols=n,this.rows=r,this.sprites=new Map,h.instance.spriteRegistry.add(this)}async load(){return new Promise((t,e)=>{let o=new Image;o.src=this.src,o.onload=()=>{this.image=o;for(let i=0;i<this.rows;i++)for(let n=0;n<this.cols;n++){let r=`sprite_${n}_${i}`,u=new j(o,n*this.frameWidth,i*this.frameHeight,this.frameWidth,this.frameHeight);this.sprites.set(r,u)}t()},o.onerror=()=>{e(new Error(`Failed to load image: ${this.src}`))}})}getSprite(t){return this.sprites.get(t)}};var G=class extends a{constructor(t,e=null,o=null){super(),this.src=t,this.image=null,this.width=e,this.height=o}async preload(){return new Promise(t=>{let e=new Image;e.src=this.src,e.onload=()=>{this.image=e,this.width===null&&(this.width=e.width),this.height===null&&(this.height=e.height),t()}})}draw(t){if(this.image){let e=this.gameObject.getGlobalX(),o=this.gameObject.getGlobalY();t.drawImage(this.image,e,o,this.width,this.height)}}};var R=class extends a{constructor(t,e={width:10,height:10,color:"white"}){super(),this.shape=t,this.options=e}get color(){return this.options.color||"black"}set color(t){this.options.color=t}get width(){return this.options.width||10}set width(t){this.options.width=t}get height(){return this.options.height||10}set height(t){this.options.height=t}get radius(){return this.options.radius||10}set radius(t){this.options.radius=t}get radiusX(){return this.options.radiusX||10}set radiusX(t){this.options.radiusX=t}get radiusY(){return this.options.radiusY||5}set radiusY(t){this.options.radiusY=t}get points(){return this.options.points||[]}set points(t){this.options.points=t}get x2(){return this.options.x2||this.gameObject.getGlobalX()+10}set x2(t){this.options.x2=t}get y2(){return this.options.y2||this.gameObject.getGlobalY()}set y2(t){this.options.y2=t}get size(){return this.options.size||20}set size(t){this.options.size=t}__draw(t){let e=this.gameObject.getGlobalX(),o=this.gameObject.getGlobalY();switch(this.shape){case"rectangle":case"square":this.drawRect(t,e,o);break;case"circle":this.drawCircle(t,e,o);break;case"ellipse":this.drawEllipse(t,e,o);break;case"line":this.drawLine(t,e,o);break;case"triangle":this.drawTriangle(t,e,o);break;case"polygon":this.drawPolygon(t,e,o);break;default:this.drawRect(t,e,o);break}}drawRect(t,e,o){let{width:i=10,height:n=10,color:r="black"}=this.options;t.fillStyle=r,t.fillRect(e,o,i,n)}drawCircle(t,e,o){let{radius:i=10,color:n="black"}=this.options;t.beginPath(),t.arc(e,o,i,0,Math.PI*2),t.fillStyle=n,t.fill()}drawEllipse(t,e,o){let{radiusX:i=10,radiusY:n=5,color:r="black"}=this.options;t.beginPath(),t.ellipse(e,o,i,n,0,0,Math.PI*2),t.fillStyle=r,t.fill()}drawLine(t,e,o){let{x2:i=e+10,y2:n=o,color:r="black",width:u=2}=this.options;t.strokeStyle=r,t.lineWidth=u,t.beginPath(),t.moveTo(e,o),t.lineTo(i,n),t.stroke()}drawTriangle(t,e,o){let{size:i=20,color:n="black"}=this.options;t.fillStyle=n,t.beginPath(),t.moveTo(e,o),t.lineTo(e+i,o),t.lineTo(e+i/2,o-i),t.closePath(),t.fill()}drawPolygon(t,e,o){let{points:i=[],color:n="black"}=this.options;if(!(i.length<3)){t.fillStyle=n,t.beginPath(),t.moveTo(e+i[0][0],o+i[0][1]);for(let r=1;r<i.length;r++)t.lineTo(e+i[r][0],o+i[r][1]);t.closePath(),t.fill()}}};var T=class s extends p{constructor(t=null,e=!1){super(),this.radius=t,this.trigger=e}checkCollisionWith(t){if(t instanceof s){let e=this.getBounds(),o=t.getBounds(),i=e.x-o.x,n=e.y-o.y;return Math.hypot(i,n)<e.radius+o.radius}else return this.circleBoxCollision(t)}circleBoxCollision(t){let e=this.getBounds(),o=t.getBounds(),i=Math.max(o.x,Math.min(e.x,o.x+o.width)),n=Math.max(o.y,Math.min(e.y,o.y+o.height)),r=e.x-i,u=e.y-n;return r*r+u*u<e.radius*e.radius}getBounds(){let t=this.gameObject.getGlobalX(),e=this.gameObject.getGlobalY(),o=this.radius,i=this.gameObject.getComponent(y)?.sprite;return o===null&&i&&(o=i.width/2),{x:t,y:e,radius:o}}};var N=class s extends p{constructor(t=null,e=null,o=!1){super(),this.width=t,this.height=e,this.trigger=o}checkCollisionWith(t){return t instanceof s?this.checkBoxBoxCollision(t):t instanceof T?t.checkCollisionWith(this):!1}checkBoxBoxCollision(t){let e=this.getBounds(),o=t.getBounds(),i=.01;return e.x<o.x+o.width+i&&e.x+e.width+i>o.x&&e.y<o.y+o.height+i&&e.y+e.height+i>o.y}getBounds(){let t=this.gameObject.getGlobalX(),e=this.gameObject.getGlobalY(),o=this.width,i=this.height,n=this.gameObject.getComponent(y)?.sprite;return(o===null||i===null)&&n&&(o=o??n.width,i=i??n.height),{x:t,y:e,width:o,height:i}}};var L=class{static range(t,e){return Math.floor(Math.random()*(e-t+1)+t)}};var U=class extends a{constructor(t){super(),this.target=t}update(){this.target&&(this.gameObject.x=this.target.x)}};export{N as BoxColliderComponent,S as CameraComponent,T as CircleColliderComponent,a as Component,U as FollowTarget,h as Game,f as GameObject,G as ImageComponent,d as Input,C as Instantiate,B as MovementComponent,L as Random,k as RigidbodyComponent,O as Scene,R as ShapeComponent,j as Sprite,P as SpriteAnimationClip,K as SpriteAnimationComponent,M as SpriteRegistry,y as SpriteRendererComponent,D as Spritesheet,m as Time};
